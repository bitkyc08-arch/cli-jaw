# 12.1.1 MCP/Skills ì´ˆê¸°í™” ì‹œìŠ¤í…œ

## ì•„í‚¤í…ì²˜

```
npm i -g cli-claw  ë˜ëŠ”  cli-claw serve
  â”‚
  â”œâ”€ initMcpConfig(workingDir)
  â”‚    â””â”€ ~/.cli-claw/mcp.json ì—†ìœ¼ë©´ ìƒì„±
  â”‚         â”œâ”€ DEFAULT: puppeteer (headless:false) + context7
  â”‚         â””â”€ {workingDir}/.mcp.json ìˆìœ¼ë©´ merge
  â”‚
  â”œâ”€ copyDefaultSkills()
  â”‚    â””â”€ ~/.codex/skills/ (28ê°œ) â†’ ~/.cli-claw/skills/ ë³µì‚¬
  â”‚         â””â”€ ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ìŠ¤í‚¬ì€ ìŠ¤í‚µ
  â”‚
  â”œâ”€ ensureSkillsSymlinks(workingDir)
  â”‚    â”œâ”€ {workingDir}/.agents/skills â†’ ~/.cli-claw/skills
  â”‚    â”œâ”€ ~/.agents/skills â†’ ~/.cli-claw/skills (í™ˆ fallback)
  â”‚    â””â”€ ~/.agent/skills â†’ ~/.agents/skills (compat)
  â”‚
  â””â”€ syncToAll(config, workingDir)   â† /mcp sync ì‹œ
       â”œâ”€ {workingDir}/.mcp.json         (Claude Code)
       â”œâ”€ ~/.codex/config.toml           (Codex â€” MCP ì„¹ì…˜ë§Œ patch)
       â”œâ”€ ~/.gemini/settings.json        (Gemini â€” mcpServers ë¸”ë¡ patch)
       â””â”€ ~/.config/opencode/opencode.json (OpenCode â€” mcp ë¸”ë¡ patch)
```

## CLIë³„ MCP í¬ë§· ë³€í™˜

| í•­ëª©     |    Claude/Gemini    |         Codex          |         OpenCode          |
| -------- | :-----------------: | :--------------------: | :-----------------------: |
| íŒŒì¼í˜•ì‹ |        JSON         |          TOML          |           JSON            |
| ì„œë²„ í‚¤  | `mcpServers.{name}` | `[mcp_servers.{name}]` |       `mcp.{name}`        |
| command  |       string        |         string         | **array** (cmd+args í•©ì¹¨) |
| args     |      ë³„ë„ ë°°ì—´      |       ë³„ë„ ë°°ì—´        |     âŒ commandì— í¬í•¨      |
| env í‚¤   |        `env`        |   `[name.env]` ì„¹ì…˜    |       `environment`       |

## ê¸°ë³¸ MCP ì„œë²„

```json
{
    "puppeteer": {
        "command": "npx",
        "args": ["-y", "@anthropic/puppeteer-mcp"],
        "env": { "PUPPETEER_HEADLESS": "false" }
    },
    "context7": {
        "command": "npx",
        "args": ["-y", "@upstash/context7-mcp"]
    }
}
```

> puppeteer: í—¤ë“œë¦¬ìŠ¤ off â†’ ì‹¤ì œ ë¸Œë¼ìš°ì € ëœ¸. ì—ì´ì „íŠ¸ê°€ ì›¹ ì¡°ì‘ ê°€ëŠ¥.
> context7: ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¬¸ì„œ RAG. ì—ì´ì „íŠ¸ê°€ ìµœì‹  API ì°¸ì¡°.

## ê¸°ë³¸ ìŠ¤í‚¬ (Codex 28ê°œ)

`~/.codex/skills/` â†’ `~/.cli-claw/skills/` ë³µì‚¬:

| ì¹´í…Œê³ ë¦¬    | ìŠ¤í‚¬                                                                                                                |
| ----------- | ------------------------------------------------------------------------------------------------------------------- |
| ë°°í¬        | cloudflare-deploy, netlify-deploy, vercel-deploy, render-deploy, yeet                                               |
| ë¬¸ì„œ/ë¯¸ë””ì–´ | doc, pdf, screenshot, imagegen, speech, transcribe, sora, spreadsheet                                               |
| ê°œë°œ        | develop-web-game, playwright, jupyter-notebook                                                                      |
| GitHub      | gh-address-comments, gh-fix-ci                                                                                      |
| Notion      | notion-knowledge-capture, notion-meeting-intelligence, notion-research-documentation, notion-spec-to-implementation |
| ì™¸ë¶€ì—°ë™    | atlas (MongoDB), linear, sentry, figma-implement-design                                                             |
| OpenAI      | openai-docs                                                                                                         |

## íŒŒì¼ ë³€ê²½

| íŒŒì¼                   | ë³€ê²½                                                            |
| ---------------------- | --------------------------------------------------------------- |
| `lib/mcp-sync.js`      | **[NEW]** í•µì‹¬ ëª¨ë“ˆ â€” ë³€í™˜ 4ì¢… + syncToAll + init + skills ë³µì‚¬ |
| `bin/postinstall.js`   | mcp-sync.js import, initMcpConfig + copyDefaultSkills í˜¸ì¶œ      |
| `server.js`            | import + API(GET/PUT/POST /api/mcp) + ì„œë²„ì‹œì‘ init             |
| `public/index.html`    | Settings íƒ­ ğŸ”Œ MCP Servers ì„¹ì…˜ + Sync ë²„íŠ¼                      |
| `bin/commands/chat.js` | `/mcp` ëª©ë¡ ì¡°íšŒ + `/mcp sync` ë™ê¸°í™” ëª…ë ¹                      |

## ì‚¬ìš©ë²•

```bash
# CLI
/mcp              # ì„œë²„ ëª©ë¡ ì¡°íšŒ
/mcp sync         # 4ê°œ CLIì— ë™ê¸°í™”

# Web UI
# Settings íƒ­ â†’ ğŸ”Œ MCP Servers â†’ "Sync to all CLIs"

# API
GET  /api/mcp          # í†µí•© config ì¡°íšŒ
PUT  /api/mcp          # í†µí•© config ìˆ˜ì •
POST /api/mcp/sync     # 4-target ë™ê¸°í™”
```

## ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] `lib/mcp-sync.js` ë³€í™˜ ëª¨ë“ˆ (toClaudeMcp, toCodexToml, toOpenCodeMcp)
- [x] patchCodexToml â€” TOML ë¶€ë¶„ êµì²´ (MCP ì„¹ì…˜ë§Œ êµì²´, ë‚˜ë¨¸ì§€ ë³´ì¡´)
- [x] DEFAULT_MCP_SERVERS â€” puppeteer + context7
- [x] initMcpConfig â€” ê¸°ì¡´ .mcp.json import + defaults merge
- [x] copyDefaultSkills â€” Codex 28ê°œ ìŠ¤í‚¬ ë³µì‚¬
- [x] ensureSkillsSymlinks â€” workingDir + í™ˆ + compat 3ì¤‘ ë§í¬
- [x] syncToAll â€” 4ê°œ CLI íƒ€ê²Ÿ ë™ê¸°í™”
- [x] `bin/postinstall.js` ë¦¬íŒ©í† ë§
- [x] `server.js` API ì—”ë“œí¬ì¸íŠ¸ 3ê°œ
- [x] Web UI MCP ì„¹ì…˜
- [x] CLI `/mcp` + `/mcp sync` ëª…ë ¹
