# 12.1.9 CLI Chat UX ê°œì„ 

## ë³€ê²½ ì‚¬í•­

### 1. Ctrl+C / ESC ì¤‘ë‹¨ ìˆ˜ì •

`if (!inputActive) return;` ê°€ë“œê°€ ëª¨ë“  í‚¤ ì…ë ¥ì„ ì°¨ë‹¨í•˜ì—¬ ì—ì´ì „íŠ¸ ì‹¤í–‰ ì¤‘ Ctrl+C/ESCê°€ ë™ì‘í•˜ì§€ ì•Šë˜ ë²„ê·¸ ìˆ˜ì •.

```diff
  process.stdin.on('data', (key) => {
-     if (!inputActive) return;
+     // ESC and Ctrl+C always work, even when agent is running
+     // Typing always works (for queue). Only Enter checks inputActive.
```

### 2. í ì…ë ¥ UI ê°œì„ 

ì—ì´ì „íŠ¸ ì‹¤í–‰ ì¤‘ íƒ€ì´í•‘ ì‹œ ê¸°ì¡´ í”„ë¡¬í”„íŠ¸ ì¤„ì— ê²¹ì¹˜ë˜ ë¬¸ì œ ìˆ˜ì •. ì²« í‚¤ ì…ë ¥ ì‹œ `showPrompt()`ë¡œ ìƒˆ êµ¬ë¶„ì„ +í”„ë¡¬í”„íŠ¸ ìƒì„±.

```
  â¯ ã…ã…‡ã…ã…‡              â† ì „ì†¡ë¨
  â— planning working...
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â† íƒ€ì´í•‘ ì‹œì‘í•˜ë©´ ìë™ ìƒì„±
  â¯ ë‘ë²ˆì§¸ ë©”ì‹œì§€          â† ìƒˆ í”„ë¡¬í”„íŠ¸ì—ì„œ ì…ë ¥
  â³ 1ê°œ ëŒ€ê¸° ì¤‘
```

### 3. Tool Use í‘œì‹œ

`agent_tool` WS ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì¶”ê°€. ì„œë²„ê°€ ì´ë¯¸ broadcastí•˜ë˜ tool ì •ë³´ë¥¼ CLIì—ì„œ í‘œì‹œ.

```
  ğŸ”§ Read file          â† Claude tool_use
  âš¡ cat server.js      â† Codex command
  ğŸ’­ thinking...        â† reasoning
  ğŸ” web search query   â† web_search
```

### 4. WS ì—°ê²° ì‹œ ì´ˆê¸° ìƒíƒœ ì „ì†¡ (12.1.8, ìœ ì € ì§ì ‘ êµ¬í˜„)

í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì‹œ í˜„ì¬ agent ìƒíƒœì™€ í ìƒíƒœë¥¼ ì¦‰ì‹œ ì „ì†¡.

## íŒŒì¼ ë³€ê²½

| íŒŒì¼        | ë³€ê²½                                                         |
| ----------- | ------------------------------------------------------------ |
| `chat.js`   | inputActive ê°€ë“œ ì œê±°, showPrompt() í UI, agent_tool í•¸ë“¤ëŸ¬ |
| `server.js` | WS connection ì´ˆê¸° ìƒíƒœ ì „ì†¡ (12.1.8, ìœ ì €)                  |
