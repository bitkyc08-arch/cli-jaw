# 12.1.3.1 CLI MCP Install — npm + PyPI 지원

## 명령어 구분

| 명령어                       | 실행 위치 | 기능                                        |
| ---------------------------- | --------- | ------------------------------------------- |
| `cli-claw mcp install <pkg>` | 터미널    | **새** MCP 서버 설치 + mcp.json 등록 + sync |
| `cli-claw mcp list`          | 터미널    | mcp.json 서버 목록                          |
| `cli-claw mcp sync`          | 터미널    | 4개 CLI에 동기화                            |
| `/mcp install`               | 채팅 안   | mcp.json의 **기존** npx/uv 서버를 전역 변환 |

## 패키지 자동 탐지

```
@scope/name           → npm  (@ prefix)
mcp-server-*          → pypi (mcp-server- prefix)
그 외                 → npm  (기본값)
--pypi / --npm        → 강제 지정
```

## 설치 흐름

```
cli-claw mcp install @modelcontextprotocol/server-puppeteer
  ├─ detectEcosystem() → npm
  ├─ npm i -g @modelcontextprotocol/server-puppeteer
  ├─ which mcp-server-puppeteer → /opt/homebrew/bin/...
  ├─ mcp.json에 등록 (command: bin, args: [])
  └─ syncAll() → Claude .mcp.json + Codex config.toml + ...

cli-claw mcp install mcp-server-fetch --pypi
  ├─ detectEcosystem() → pypi
  ├─ uv tool install mcp-server-fetch (또는 pip install)
  ├─ which mcp-server-fetch → ~/.local/bin/...
  ├─ mcp.json에 등록
  └─ syncAll()
```

## /mcp install (채팅) — uv 지원 추가

`installMcpServers()` 분기:

| command      | 동작                                           |
| ------------ | ---------------------------------------------- |
| `npx`        | `npm i -g` → NPX_TO_GLOBAL에서 바이너리명 조회 |
| `uv` / `uvx` | `uv tool install` → args에서 패키지명 추출     |
| 그 외        | skip (이미 전역)                               |

## 구현 파일

| 파일                  | 변경                                                     |
| --------------------- | -------------------------------------------------------- |
| `bin/commands/mcp.js` | **[NEW]** install/list/sync 서브명령 (npm+pypi 자동탐지) |
| `bin/cli-claw.js`     | `mcp` 케이스 + help 텍스트 추가                          |
| `lib/mcp-sync.js`     | `installMcpServers()` — uv/uvx 분기 추가                 |

## 체크리스트

- [x] `bin/commands/mcp.js` — install (npm+pypi) / list / sync
- [x] `bin/cli-claw.js` — `mcp` 서브명령 등록
- [x] `lib/mcp-sync.js` — `installMcpServers()` uv/uvx 지원
- [x] 구문 검증 통과
